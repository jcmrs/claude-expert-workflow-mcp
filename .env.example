# Environment Configuration Example
# Copy this file to .env and configure with your values

# Environment
NODE_ENV=production

# Application
APP_NAME=claude-expert-workflow-mcp
APP_VERSION=1.0.0
PORT=3000
HOST=0.0.0.0

# DUAL-MODE ARCHITECTURE CONFIGURATION
#
# Mode 1: Hybrid Orchestration (Default)
# - Uses Claude Code subscription
# - MCP provides structured prompts for manual processing
# - No API key required
#
# Mode 2: Direct API Integration
# - Uses Anthropic API directly for conversations
# - Requires ANTHROPIC_API_KEY to be set
# - Provides full interactive conversation experience

# Optional: Anthropic API Configuration (for Mode 2)
# If ANTHROPIC_API_KEY is set, server runs in Direct API mode
# If not set, server runs in Hybrid Orchestration mode
ANTHROPIC_API_KEY=

# Claude API Configuration (used in API Processing mode)
CLAUDE_MODEL=claude-3-sonnet-20240229
MAX_TOKENS=8000
TEMPERATURE=0.7

# Extended Thinking Configuration (API Processing mode only)
# Users must explicitly enable Extended Thinking
# Only triggers when users say "think hard", "think step by step", etc.
ENABLE_EXTENDED_THINKING=false
THINKING_BUDGET_TOKENS=8192
AUTO_DETECT_THINKING=false

# MCP Configuration
MCP_TIMEOUT=120000
MCP_MAX_RETRIES=3
MCP_RETRY_DELAY=1000

# Logging Configuration
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_ENABLED=true
LOG_ROTATION_ENABLED=true
LOG_MAX_FILES=30d
LOG_MAX_SIZE=100m

# Storage Configuration
STORAGE_TYPE=file
DATA_DIR=./data
BACKUP_ENABLED=true
BACKUP_INTERVAL_HOURS=24
BACKUP_RETENTION_DAYS=30
AUTO_SAVE=true

# Monitoring Configuration
METRICS_ENABLED=true
HEALTH_CHECKS_ENABLED=true
ALERTING_ENABLED=true
METRICS_RETENTION_HOURS=24
HEALTH_CHECK_INTERVAL_MS=30000
ALERT_EVALUATION_INTERVAL_MS=60000
STRUCTURED_LOGGING=true
CORRELATION_TRACKING=true

# Performance Configuration
CACHE_ENABLED=true
CACHE_TTL_MS=300000
CACHE_MAX_SIZE=1000
CONVERSATION_CACHE_ENABLED=true
EXPERT_OUTPUT_CACHE_ENABLED=true

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Circuit Breaker Configuration
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT_MS=30000
CIRCUIT_BREAKER_RESET_TIMEOUT_MS=60000

# Resource Limits
MAX_CONCURRENT_WORKFLOWS=50
MAX_CONCURRENT_CONVERSATIONS=100
MEMORY_LIMIT_MB=512
REQUEST_TIMEOUT_MS=30000

# Security Configuration
ENABLE_CORS=true
CORS_ORIGIN=*
ENABLE_HELMET=true
TRUST_PROXY=false

# Development/Debug (set to false in production)
DEBUG=false
ENABLE_PROFILING=false
MOCK_ANTHROPIC_API=false

# Monitoring Endpoints
METRICS_ENDPOINT=/metrics
HEALTH_ENDPOINT=/health
READINESS_ENDPOINT=/ready

# External Services Configuration
EXTERNAL_API_TIMEOUT_MS=10000
EXTERNAL_API_RETRIES=3
EXTERNAL_API_RETRY_DELAY_MS=1000

# Optional: Redis Configuration (for distributed caching)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=redis123
REDIS_DB=0

# Optional: Database Configuration (for future SQL support)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=claude_expert_workflow
DB_USER=postgres
DB_PASSWORD=password

# Optional: Monitoring Service Configuration
PROMETHEUS_ENABLED=false
GRAFANA_ENABLED=false
GRAFANA_PASSWORD=admin

# Optional: Alert Configuration (for Slack, email, etc.)
SLACK_WEBHOOK_URL=
EMAIL_SMTP_HOST=
EMAIL_SMTP_PORT=587
EMAIL_USER=
EMAIL_PASSWORD=
ALERT_EMAIL_TO=

# Optional: Task Master AI Integration
# Enable integration with Task Master AI for automated task generation
TASKMASTER_INTEGRATION_ENABLED=false
TASKMASTER_API_ENDPOINT=http://localhost:3001
TASKMASTER_AUTO_GENERATE_TASKS=false
TASKMASTER_PROJECT_ID=